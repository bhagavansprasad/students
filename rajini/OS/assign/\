#include <stdio.h>
#include <sys/types.h>
#include <sys/ipc.h>

main()
{
	int i = 0, j = 0, a=0, pid;
	int semid, nsemset=0, nsem, key;
	nsem=1;
	pid = fork();

	if(pid == 0)
	{  
		while(a <= 10)
		{  
			key=(key_t)nsemset;
			semid=semget(nsemset, nsem, 0666||IPC_CREAT);
			if(semid > 0)
				printf(" Child: %d\t", i);
			i++;
			semctl(semid,0,IPC_RMID,0);
			a++;
		}
	}
	else if(pid > 0)
	{
		while(a <= 10)
		{  
			key=(key_t)nsemset;
			semid=semget(nsemset, nsem, 0666||IPC_CREAT);
			if(semid>0)
				printf("Parent: %d\t\n", j);
			j++;
			semctl(semid,0,IPC_RMID,0);
			a++;
		}

	}
}
